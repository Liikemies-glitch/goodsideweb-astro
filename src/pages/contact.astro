---
import BaseLayout from '../layouts/BaseLayout.astro';
// import ScheduleSection from '../components/ScheduleSection.astro'; // Removed import
import CalendlyEmbed from '../components/CalendlyEmbed.astro';

// Remove the old script variable
// const calEmbedScript = ` ... `;

const pageTitle = "Ota yhteyttä | The Good Side";
const pageDescription = "Varaa aika kalenterista tai jätä yhteydenottopyyntö, niin katsotaan miten voimme auttaa.";
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <!-- Contact Hero Section -->
  <section class="contact-hero">
    <div class="container">
      <div class="contact-grid">
        <div class="contact-content">
          <h1>Jutellaan tuotteesi tulevaisuudesta</h1>
          <p class="contact-description">
            {pageDescription}
          </p>
          <div class="contact-person">
            <p><strong>Mikki Aalto-Ylevä</strong></p>
            <p>040 869 8887</p>
            <p>mikki@goodside.fi</p>
          </div>
        </div>
        <!-- Replace the old booking div with the one from the embed code -->
        <!-- Cal inline embed code begins -->
        <div style="width:100%;height:100%;overflow:scroll" id="my-cal-inline" class="contact-booking"></div> 
        <!-- The class="contact-booking" is added back to retain styling -->
      </div>
    </div>
  </section>

  <!-- Container for the Calendly embed for styling/layout purposes -->
  <section class="schedule-section">
    <div class="container">
        <CalendlyEmbed elementId="my-cal-inline" calLink="aaltoyleva/kartoitustapaaminen" />
    </div>
  </section>

  <!-- START: HubSpot Form Section -->
  <section class="contact-form-section">
    <div class="container">
      <div class="form-content">
        <h2>Tai jätä yhteydenottopyyntö</h2>
        <p>Jos et löydä sopivaa aikaa tai haluat mieluummin että otan yhteyttä, täytä lomake niin palaan asiaan mahdollisimman pian.</p>
        <!-- HubSpot Embed Code -->
        <script src="https://js-eu1.hsforms.net/forms/embed/145360432.js" defer></script>
        <div class="hs-form-frame" data-region="eu1" data-form-id="8bc5845c-348d-4ba7-baea-ebd46b11b0a0" data-portal-id="145360432"></div>
        <!-- End HubSpot Embed Code -->
      </div>
    </div>
  </section>
  <!-- END: HubSpot Form Section -->

  <!-- Add the new inline script -->
  <script type="text/javascript" is:inline>
    (function (C, A, L) { let p = function (a, ar) { a.q.push(ar); }; let d = C.document; C.Cal = C.Cal || function () { let cal = C.Cal; let ar = arguments; if (!cal.loaded) { cal.ns = {}; cal.q = cal.q || []; d.head.appendChild(d.createElement("script")).src = A; cal.loaded = true; } if (ar[0] === L) { const api = function () { p(api, arguments); }; const namespace = ar[1]; api.q = api.q || []; if(typeof namespace === "string"){cal.ns[namespace] = cal.ns[namespace] || api;p(cal.ns[namespace], ar);p(cal, ["initNamespace", namespace]);} else p(cal, ar); return;} p(cal, ar); }; })(window, "https://app.cal.com/embed/embed.js", "init");
    Cal("init", "kartoitustapaaminen", {
      origin:"https://cal.com",
      cookieBanner: {
        show: false,
        blocking: false
      }
    });

    Cal.ns.kartoitustapaaminen("inline", {
      elementOrSelector:"#my-cal-inline",
      config: {"layout":"month_view"},
      calLink: "aaltoyleva/kartoitustapaaminen",
    });

    Cal.ns.kartoitustapaaminen("ui", {"hideEventTypeDetails":false,"layout":"month_view"});
  </script>
  <!-- Cal inline embed code ends -->

</BaseLayout>

<style>
    /* Add some basic styling for the new schedule section if needed */
    .schedule-section {
        padding: var(--spacing-xl) 0;
    }
  /* Contact Hero Section */
  .contact-hero {
    /* background-color: var(--color-bg); */ /* Remove default bg */
    padding: 4rem 0; /* Korvattu var(--spacing-4xl) 0 */
    background-image: url('/images/mesh-gradient-green.webp'); /* Add gradient background */
    background-size: cover;
    background-position: center;
  }
</style> 